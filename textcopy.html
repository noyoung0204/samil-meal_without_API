<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>이미지에서 텍스트 추출</title>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.0.1/dist/tesseract.min.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    textarea {
      width: 100%;
      height: 200px;
      margin-top: 10px;
      white-space: pre-wrap;       /* 줄바꿈 유지 */
      word-break: break-word;      /* 긴 단어 줄 바꿈 */
      font-family: '맑은 고딕', 'Malgun Gothic', Arial, sans-serif;
      font-size: 16px;
      line-height: 1.5;
      padding: 10px;
      box-sizing: border-box;
      resize: vertical;
    }
    button { margin-top: 10px; padding: 10px 20px; cursor: pointer; }
  </style>
</head>
<body>
  <h2>이미지에서 텍스트 추출기</h2>
  <input type="file" id="imageInput" accept="image/*" />
  <button onclick="extractText()">텍스트 추출</button>
  <textarea id="resultText" placeholder="추출된 텍스트가 여기에 표시됩니다..."></textarea>
  <button onclick="copyText()">클립보드에 복사</button>

  <script>
    function extractText() {
      const input = document.getElementById('imageInput');
      const file = input.files[0];
      if (!file) {
        alert("이미지를 업로드해주세요.");
        return;
      }

      Tesseract.recognize(file, 'kor+eng', {
        logger: m => console.log(m)
      }).then(({ data: { text } }) => {
        document.getElementById('resultText').value = text;
      }).catch(err => {
        console.error(err);
        alert("OCR 처리 중 오류가 발생했습니다.");
      });
    }

    function copyText() {
      const text = document.getElementById('resultText').value;
      if (!text) {
        alert("복사할 텍스트가 없습니다.");
        return;
      }
      navigator.clipboard.writeText(text).then(() => {
        alert("텍스트가 클립보드에 복사되었습니다!");
      }).catch(() => {
        alert("복사에 실패했습니다.");
      });
    }
  </script>
</body>
</html>
