import json
import requests
from bs4 import BeautifulSoup
from fake_useragent import UserAgent
import re

# ë©”ë‰´ ë¦¬ìŠ¤íŠ¸
menu_list = [
  "ëŒ€íŒ¨ì œìœ¡ë®ë°¥", "ë¯¸ì†Œì¥êµ­", "ìƒˆìš°ê¹ŒìŠ¤", "ë°°ì¶”ê¹€ì¹˜", "ì»µê³¼ì¼",
  "í•«ì¹˜ì¦ˆì˜¤ì•¼ê¼¬ë™", "ì½©ë‚˜ë¬¼êµ­", "ê·¼ëŒ€ëœì¥ë¬´ì¹¨", "ë§Œë‘íƒ•ìˆ˜", "ë‚˜ë°•ê¹€ì¹˜", "ì°¸ìŒ€ì•½ê³¼",
  "ê°„ì¥ë¼ì§€ë¶ˆê³ ê¸°", "ê³ ë¡œì¼€", "ì¼€ì°¹", "ë°°ì¶”ê¹€ì¹˜", "ì¿ ì•¤í¬ì¼€ì´í¬",
  "ê¹€ì¹˜ì•Œë°¥", "ê¼¬ì¹˜ì–´ë¬µêµ­", "ì•„ëª¬ë“œë©¸ì¹˜ë³¶ìŒ", "ì–‘ë…ê°ì", "ì¹˜í´ë ˆí­ë¦½", "ë°±ê¹€ì¹˜", "í‘ë¦¬ìˆ˜íœ˜ë‚­ì‹œì—",
  "ì°¸ì¹˜ë§ˆìš”ë®ë°¥", "ìš°ë™êµ­ë¬¼", "ì°°ë„ê·¸ë¡¤", "ì•Œê°ìì½˜ë²„í„°êµ¬ì´", "ë°°ì¶”ê¹€ì¹˜", "ë ˆë“œìëª½ìŒë£Œ",
  "ì•„ìš±ëœì¥êµ­", "ìˆ˜ìœ¡", "ë¬´ìƒì±„", "ë¶€ì¶”ë¬´ì¹¨", "ì•½ê³ ì¶”ì¥", "ë³´ìŒˆê¹€ì¹˜", "ê³¼ì¼í‘¸ë”©", "ì•¼ì±„ìŠ¤í‹±", "ìƒì¶”", "ìŒˆì¥",
  "ì°¸ì¹˜ìœ ë¶€ë¡¤ì´ˆë°¥", "ì¹˜ì•„ë°”íƒ€ìƒŒë“œìœ„ì¹˜", "í›„ë ˆì´í¬ìƒëŸ¬ë“œ", "í‘ì„ìë“œë ˆì‹±", "ë¶„ëª¨ìë¡œì œë–¡ë³¶ì´", "ë¶ˆê³ ê¸°í”¼ì", "ë°±ê¹€ì¹˜", "ë”¸ê¸°ìš°ìœ ",
  "ì°°ë³´ë¦¬ë°¥", "ê¹€ì¹˜ì°Œê°œ", "ê°„ì¥ì°œë‹­", "ê±´íŒŒë˜ë³¶ìŒ", "ì¸ ì¿ ë„¤", "ë°°ì¶”ê²‰ì ˆì´",
  "ìœ¡ê°œì¥", "ê³„ë€ì°œ", "ë¯¸ë‹ˆëˆê¹ŒìŠ¤", "ì„ë°•ì§€", "ê³¼ì¼ì½”ë„ˆ", "ì´ˆì½”ë³¼",
  "í† ë§ˆí† ìŠ¤íŒŒê²Œí‹°", "ì¹˜í‚¨ìƒëŸ¬ë“œ", "ëŒë ˆë„ë¥´ì•„ì´ìŠ¤í¬ë¦¼", "ë‹¨ë¬´ì§€ì˜¤ì´í”¼í´", "ê°ˆë¦­ë°”ê²ŒíŠ¸",
  "ì°¨ì¡°ë°¥", "ëœì¥ì°Œê°œ", "ì¸„ëŸ¬ìŠ¤ë–¡ë§›íƒ•", "í›ˆì œëˆìœ¡êµ¬ì´", "ë¬´ìŒˆ", "ë°°ì¶”ê¹€ì¹˜", "ë§ê³ ìŒë£Œ",
  "ì¹´ë ˆì†ŒìŠ¤", "ì™„ë‘ì½©ë°¥", "ì–‘ë°°ì¶”ìƒëŸ¬ë“œ", "ì§€ì½”ë°”ë‹­ë‹¤ë¦¬êµ¬ì´", "ë°°ì¶”ê¹€ì¹˜", "ë§ˆì¹´ë¡±",
  "ë¯¸ì†Œë¶€íƒ€ë™", "ìœ ë¶€ë§‘ì€êµ­", "í•˜ì™€ì´ì•ˆìƒëŸ¬ë“œ", "ì—ê·¸ì°¸ì¹˜ë¸Œë¦¬ë˜", "ë°°ì¶”ê¹€ì¹˜", "í—ˆì‰¬í¬ë¦¼íŒŒì´",
  "ìˆ˜ìˆ˜ë°¥", "ëˆìœ¡ì§œê¸€ì´ì°Œê°œ", "ê¼¬ì¹˜ì—†ëŠ”ì†Œë–¡", "ë‹¨í˜¸ë°•ì˜¥ìˆ˜ìˆ˜ì¹˜ì¦ˆêµ¬ì´", "ë°°ì¶”ê²‰ì ˆì´", "ì˜¥ìˆ˜ìˆ˜ë¼ë–¼", "ìš”êµ¬ë¥´íŠ¸",
  "í–„ì•¼ì±„ë³¶ìŒë°¥", "ê¹€ì¹˜ìš°ë™", "ì‹œë¦¬ì–¼ê³¼ì¼ìƒëŸ¬ë“œ", "ë‹­ê¼¬ì¹˜íŠ€ê¹€", "ë°°ì¶”ê¹€ì¹˜", "ì‚¬ê³¼ìŒë£Œ",
  "í‘ë¯¸ë°¥", "ì¡°ë­ì´ë–¡êµ­", "ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤ì¹´ì¸ ", "ë°°ì¶”ê¹€ì¹˜", "ë¯¸ë‹ˆë”¸ê¸°ë¡¤ì¼€ì´í¬", "ì•¼ì±„ìŠ¤í‹±",
  "ì–‘ì†¡ì´ìŠ¤í”„", "í•˜íŠ¸ë²„ê±°", "ì½˜ìŠ¬ë¡œìš°", "íšŒì˜¤ë¦¬ê°ì", "ì´ì˜¨ìŒë£Œ"
]

# Bing ì´ë¯¸ì§€ ê²€ìƒ‰ í•¨ìˆ˜
def get_bing_image_url(query):
    headers = {
        "User-Agent": UserAgent().random
    }
    url = f"https://www.bing.com/images/search?q={query}+ìŒì‹&form=HDRSC3"
    response = requests.get(url, headers=headers)
    soup = BeautifulSoup(response.text, "html.parser")
    image_elements = soup.find_all("a", {"class": "iusc"})
    for img in image_elements:
        m = img.get("m")
        if m:
            match = re.search(r'"murl":"(.*?)"', m)
            if match:
                return match.group(1)
    return None

# ì´ë¯¸ì§€ ìˆ˜ì§‘ ë° íŒŒì¼ ì €ì¥
def main():
    results = {}
    for menu in menu_list:
        print(f"ğŸ” ê²€ìƒ‰ ì¤‘: {menu}")
        img_url = get_bing_image_url(menu)
        results[menu] = img_url
    print("âœ… ì´ë¯¸ì§€ ìˆ˜ì§‘ ì™„ë£Œ")

    # ê²°ê³¼ HTML ì €ì¥
    html = """
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <title>ê¸‰ì‹ ì´ë¯¸ì§€</title>
        <style>
            body { font-family: sans-serif; background: #f4f4f4; padding: 30px; }
            .item { margin: 20px 0; padding: 20px; background: white; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
            img { max-width: 300px; border-radius: 12px; }
        </style>
    </head>
    <body>
        <h1>ğŸ± ê¸‰ì‹ ì´ë¯¸ì§€ ìë™ ìˆ˜ì§‘ ê²°ê³¼</h1>
    """
    for menu, img_url in results.items():
        if img_url:
            html += f"""
            <div class="item">
                <h2>{menu}</h2>
                <img src="{img_url}" alt="{menu}">
            </div>
            """
        else:
            html += f"""
            <div class="item">
                <h2>{menu}</h2>
                <p>âŒ ì´ë¯¸ì§€ ì—†ìŒ</p>
            </div>
            """
    html += "</body></html>"

    with open("menu_images.html", "w", encoding="utf-8") as f:
        f.write(html)

    # JSì— ì“¸ JSON íŒŒì¼ ì €ì¥
    with open("image_map.js", "w", encoding="utf-8") as f:
        f.write("const imageMap = ")
        json.dump(results, f, ensure_ascii=False, indent=2)
        f.write(";")

    print("âœ… HTML ë° image_map.js íŒŒì¼ ìƒì„± ì™„ë£Œ")

if __name__ == "__main__":
    main()
